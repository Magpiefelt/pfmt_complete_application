import{d as le,r as u,g as te,v as ae,c as f,a as s,i as t,w as n,b as a,e as q,F as M,h as $,j as L,t as p,A as oe,B as v,C as y,D as N,V as S,P as ne,o as c,l as i,y as R}from"./index-fcefbe48.js";import{A as z,_ as m}from"./AlbertaText-515bd883.js";import{c as B,a as G,b as X,_ as ie}from"./createLucideIcon-0cf0090d.js";import{P as re,_ as ue,B as H}from"./plus-c5421d22.js";import{a as d,_ as de,S as ce}from"./square-pen-c2dc69ae.js";import{_ as fe,a as pe}from"./ErrorMessage.vue_vue_type_script_setup_true_lang-7165bd6b.js";import{M as ve}from"./map-pin-4a4a8a9e.js";import{E as me,X as J}from"./x-47059e95.js";/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=B("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=B("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);/**
 * @license lucide-vue-next v0.536.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=B("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),be={class:"container mx-auto px-4 py-8"},_e={class:"flex items-center justify-between mb-6"},we={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ve={class:"flex items-end"},Ce={key:0,class:"flex justify-center py-8"},ke={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},je={class:"flex items-start justify-between"},Ae={class:"space-y-3"},Pe={class:"flex items-center space-x-2 text-sm text-gray-600"},Me={class:"flex items-center space-x-2 text-sm text-gray-600"},$e={class:"flex items-center space-x-2 text-sm text-gray-600"},Se={class:"flex flex-wrap gap-1 mt-1"},ze={class:"flex items-center justify-between"},Te={class:"flex items-center space-x-1"},Ue={class:"text-sm text-gray-600 ml-1"},Ee={class:"flex space-x-2 pt-2"},he={key:3,class:"text-center py-12"},Le={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ne={class:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto"},Be={class:"flex items-center justify-between mb-4"},Fe={class:"text-xl font-semibold"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},De={class:"flex justify-end space-x-2 pt-4"},qe={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Re={class:"bg-white rounded-lg p-6 w-full max-w-lg"},Ge={class:"flex items-center justify-between mb-4"},Xe={class:"space-y-4"},He=["value"],Je={class:"flex justify-end space-x-2 pt-4"},ts=le({__name:"VendorManagementPage",setup(Ke){const j=u(!1),x=u(""),A=u(!1),F=u([]),I=u([]),w=u(""),V=u(""),C=u(""),b=u(!1),T=u(!1),_=u(!1),r=u({id:null,name:"",industry:"",email:"",phone:"",location:"",capabilitiesText:"",description:"",status:"active"}),U=u(null),k=u(""),P=u(""),D=te(()=>{let o=F.value;if(w.value){const e=w.value.toLowerCase();o=o.filter(l=>l.name.toLowerCase().includes(e)||l.capabilities.some(g=>g.toLowerCase().includes(e)))}return V.value&&(o=o.filter(e=>e.capabilities.includes(V.value))),C.value&&(o=o.filter(e=>e.status===C.value)),o}),E=async()=>{j.value=!0,x.value="";try{const o=await S.getVendors();o.success&&(F.value=o.data.map(e=>({...e,capabilities:e.capabilities||[],rating:e.rating||4,status:e.status||"active"})))}catch(o){x.value="Failed to load vendors",console.error("Error loading vendors:",o)}finally{j.value=!1}},K=async()=>{var o;try{const e=await ne.getProjects();e.success&&((o=e.data)!=null&&o.projects)&&(I.value=e.data.projects)}catch(e){console.error("Error loading projects:",e)}},O=o=>{switch(o){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},Q=()=>{w.value="",V.value="",C.value=""},W=o=>{console.log("View vendor:",o)},Y=o=>{r.value={id:o.id,name:o.name,industry:o.industry||"",email:o.email||"",phone:o.phone||"",location:o.location||"",capabilitiesText:o.capabilities.join(", "),description:o.description||"",status:o.status||"active"},T.value=!0},Z=o=>{U.value=o,k.value="",P.value="",_.value=!0},h=()=>{b.value=!1,T.value=!1,_.value=!1,r.value={id:null,name:"",industry:"",email:"",phone:"",location:"",capabilitiesText:"",description:"",status:"active"}},ee=async()=>{A.value=!0;try{const o={...r.value,capabilities:r.value.capabilitiesText.split(",").map(l=>l.trim()).filter(l=>l.length>0)};let e;b.value?e=await S.createVendor(o):e=await S.updateVendor(o.id,o),e.success&&(await E(),h())}catch(o){x.value="Failed to save vendor",console.error("Error saving vendor:",o)}finally{A.value=!1}},se=async()=>{try{(await S.addVendorToProject(k.value,{vendorId:U.value.id,role:P.value})).success&&(_.value=!1,console.log("Vendor assigned successfully"))}catch(o){x.value="Failed to assign vendor to project",console.error("Error assigning vendor:",o)}};return ae(()=>{E(),K()}),(o,e)=>(c(),f("div",be,[s("div",_e,[s("div",null,[t(a(z),{tag:"h1",size:"heading-xl",mb:"xs"},{default:n(()=>e[15]||(e[15]=[i("Vendor Management",-1)])),_:1,__:[15]}),t(a(z),{color:"secondary"},{default:n(()=>e[16]||(e[16]=[i("Manage vendor profiles, capabilities, and project assignments",-1)])),_:1,__:[16]})]),t(a(m),{onClick:e[0]||(e[0]=l=>b.value=!0),class:"flex items-center space-x-2"},{default:n(()=>[t(a(re),{class:"h-4 w-4"}),e[17]||(e[17]=s("span",null,"Add Vendor",-1))]),_:1,__:[17]})]),t(a(X),{class:"mb-6"},{default:n(()=>[t(a(G),{class:"p-4"},{default:n(()=>[s("div",we,[s("div",null,[t(a(d),{for:"search"},{default:n(()=>e[18]||(e[18]=[i("Search Vendors",-1)])),_:1,__:[18]}),v(s("input",{id:"search","onUpdate:modelValue":e[1]||(e[1]=l=>w.value=l),type:"text",placeholder:"Search by name or capability...",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,w.value]])]),s("div",null,[t(a(d),{for:"capability"},{default:n(()=>e[19]||(e[19]=[i("Capability",-1)])),_:1,__:[19]}),v(s("select",{id:"capability","onUpdate:modelValue":e[2]||(e[2]=l=>V.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[20]||(e[20]=[s("option",{value:""},"All Capabilities",-1),s("option",{value:"construction"},"Construction",-1),s("option",{value:"design"},"Design",-1),s("option",{value:"consulting"},"Consulting",-1),s("option",{value:"engineering"},"Engineering",-1)]),512),[[N,V.value]])]),s("div",null,[t(a(d),{for:"status"},{default:n(()=>e[21]||(e[21]=[i("Status",-1)])),_:1,__:[21]}),v(s("select",{id:"status","onUpdate:modelValue":e[3]||(e[3]=l=>C.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},e[22]||(e[22]=[s("option",{value:""},"All Statuses",-1),s("option",{value:"active"},"Active",-1),s("option",{value:"inactive"},"Inactive",-1),s("option",{value:"pending"},"Pending",-1)]),512),[[N,C.value]])]),s("div",Ve,[t(a(m),{onClick:Q,variant:"outline",class:"w-full"},{default:n(()=>e[23]||(e[23]=[i(" Clear Filters ",-1)])),_:1,__:[23]})])])]),_:1})]),_:1}),j.value?(c(),f("div",Ce,[t(pe,{size:"lg"})])):x.value?(c(),q(fe,{key:1,message:x.value,onRetry:E},null,8,["message"])):(c(),f("div",ke,[(c(!0),f(M,null,$(D.value,l=>(c(),q(a(X),{key:l.id,class:"hover:shadow-lg transition-shadow"},{default:n(()=>[t(a(ie),null,{default:n(()=>[s("div",je,[s("div",null,[t(a(ue),{class:"text-lg"},{default:n(()=>[i(p(l.name),1)]),_:2},1024),t(a(de),null,{default:n(()=>[i(p(l.industry),1)]),_:2},1024)]),s("span",{class:R([O(l.status),"px-2 py-1 rounded-full text-xs font-medium"])},p(l.status),3)])]),_:2},1024),t(a(G),null,{default:n(()=>[s("div",Ae,[s("div",Pe,[t(a(ge),{class:"h-4 w-4"}),s("span",null,p(l.email),1)]),s("div",Me,[t(a(ye),{class:"h-4 w-4"}),s("span",null,p(l.phone),1)]),s("div",$e,[t(a(ve),{class:"h-4 w-4"}),s("span",null,p(l.location),1)]),s("div",null,[t(a(d),{class:"text-sm font-medium"},{default:n(()=>e[24]||(e[24]=[i("Capabilities",-1)])),_:1,__:[24]}),s("div",Se,[(c(!0),f(M,null,$(l.capabilities,g=>(c(),f("span",{key:g,class:"px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full"},p(g),1))),128))])]),s("div",ze,[t(a(d),{class:"text-sm font-medium"},{default:n(()=>e[25]||(e[25]=[i("Performance",-1)])),_:1,__:[25]}),s("div",Te,[(c(),f(M,null,$(5,g=>t(a(xe),{key:g,class:R([g<=l.rating?"text-yellow-400 fill-current":"text-gray-300","h-4 w-4"])},null,8,["class"])),64)),s("span",Ue,"("+p(l.rating)+"/5)",1)])]),s("div",Ee,[t(a(m),{onClick:g=>W(l),variant:"outline",size:"sm",class:"flex-1"},{default:n(()=>[t(a(me),{class:"h-4 w-4 mr-1"}),e[26]||(e[26]=i(" View ",-1))]),_:2,__:[26]},1032,["onClick"]),t(a(m),{onClick:g=>Y(l),variant:"outline",size:"sm",class:"flex-1"},{default:n(()=>[t(a(ce),{class:"h-4 w-4 mr-1"}),e[27]||(e[27]=i(" Edit ",-1))]),_:2,__:[27]},1032,["onClick"]),t(a(m),{onClick:g=>Z(l),size:"sm",class:"flex-1"},{default:n(()=>[t(a(H),{class:"h-4 w-4 mr-1"}),e[28]||(e[28]=i(" Assign ",-1))]),_:2,__:[28]},1032,["onClick"])])])]),_:2},1024)]),_:2},1024))),128))])),!j.value&&!x.value&&D.value.length===0?(c(),f("div",he,[t(a(H),{class:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t(a(z),{size:"heading-m",color:"secondary",mb:"xs"},{default:n(()=>e[29]||(e[29]=[i("No vendors found",-1)])),_:1,__:[29]}),t(a(z),{color:"secondary"},{default:n(()=>e[30]||(e[30]=[i("Try adjusting your search criteria or add a new vendor.",-1)])),_:1,__:[30]})])):L("",!0),b.value||T.value?(c(),f("div",Le,[s("div",Ne,[s("div",Be,[s("h2",Fe,p(b.value?"Add New Vendor":"Edit Vendor"),1),t(a(m),{onClick:h,variant:"outline",size:"sm"},{default:n(()=>[t(a(J),{class:"h-4 w-4"})]),_:1})]),s("form",{onSubmit:oe(ee,["prevent"]),class:"space-y-4"},[s("div",Ie,[s("div",null,[t(a(d),{for:"vendorName"},{default:n(()=>e[31]||(e[31]=[i("Vendor Name *",-1)])),_:1,__:[31]}),v(s("input",{id:"vendorName","onUpdate:modelValue":e[4]||(e[4]=l=>r.value.name=l),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.name]])]),s("div",null,[t(a(d),{for:"industry"},{default:n(()=>e[32]||(e[32]=[i("Industry",-1)])),_:1,__:[32]}),v(s("input",{id:"industry","onUpdate:modelValue":e[5]||(e[5]=l=>r.value.industry=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.industry]])]),s("div",null,[t(a(d),{for:"email"},{default:n(()=>e[33]||(e[33]=[i("Email *",-1)])),_:1,__:[33]}),v(s("input",{id:"email","onUpdate:modelValue":e[6]||(e[6]=l=>r.value.email=l),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.email]])]),s("div",null,[t(a(d),{for:"phone"},{default:n(()=>e[34]||(e[34]=[i("Phone",-1)])),_:1,__:[34]}),v(s("input",{id:"phone","onUpdate:modelValue":e[7]||(e[7]=l=>r.value.phone=l),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.phone]])])]),s("div",null,[t(a(d),{for:"location"},{default:n(()=>e[35]||(e[35]=[i("Location",-1)])),_:1,__:[35]}),v(s("input",{id:"location","onUpdate:modelValue":e[8]||(e[8]=l=>r.value.location=l),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.location]])]),s("div",null,[t(a(d),{for:"capabilities"},{default:n(()=>e[36]||(e[36]=[i("Capabilities (comma-separated)",-1)])),_:1,__:[36]}),v(s("input",{id:"capabilities","onUpdate:modelValue":e[9]||(e[9]=l=>r.value.capabilitiesText=l),type:"text",placeholder:"e.g., construction, design, consulting",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.capabilitiesText]])]),s("div",null,[t(a(d),{for:"description"},{default:n(()=>e[37]||(e[37]=[i("Description",-1)])),_:1,__:[37]}),v(s("textarea",{id:"description","onUpdate:modelValue":e[10]||(e[10]=l=>r.value.description=l),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,r.value.description]])]),s("div",De,[t(a(m),{onClick:h,variant:"outline",type:"button"},{default:n(()=>e[38]||(e[38]=[i(" Cancel ",-1)])),_:1,__:[38]}),t(a(m),{type:"submit",disabled:A.value},{default:n(()=>[i(p(A.value?"Saving...":b.value?"Add Vendor":"Update Vendor"),1)]),_:1},8,["disabled"])])],32)])])):L("",!0),_.value?(c(),f("div",qe,[s("div",Re,[s("div",Ge,[e[39]||(e[39]=s("h2",{class:"text-xl font-semibold"},"Assign to Project",-1)),t(a(m),{onClick:e[11]||(e[11]=l=>_.value=!1),variant:"outline",size:"sm"},{default:n(()=>[t(a(J),{class:"h-4 w-4"})]),_:1})]),s("div",Xe,[s("div",null,[t(a(d),null,{default:n(()=>{var l;return[i("Vendor: "+p((l=U.value)==null?void 0:l.name),1)]}),_:1})]),s("div",null,[t(a(d),{for:"project"},{default:n(()=>e[40]||(e[40]=[i("Select Project",-1)])),_:1,__:[40]}),v(s("select",{id:"project","onUpdate:modelValue":e[12]||(e[12]=l=>k.value=l),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},[e[41]||(e[41]=s("option",{value:""},"Choose a project...",-1)),(c(!0),f(M,null,$(I.value,l=>(c(),f("option",{key:l.id,value:l.id},p(l.name),9,He))),128))],512),[[N,k.value]])]),s("div",null,[t(a(d),{for:"role"},{default:n(()=>e[42]||(e[42]=[i("Role",-1)])),_:1,__:[42]}),v(s("input",{id:"role","onUpdate:modelValue":e[13]||(e[13]=l=>P.value=l),type:"text",placeholder:"e.g., General Contractor, Architect",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"},null,512),[[y,P.value]])])]),s("div",Je,[t(a(m),{onClick:e[14]||(e[14]=l=>_.value=!1),variant:"outline"},{default:n(()=>e[43]||(e[43]=[i(" Cancel ",-1)])),_:1,__:[43]}),t(a(m),{onClick:se,disabled:!k.value},{default:n(()=>e[44]||(e[44]=[i(" Assign Vendor ",-1)])),_:1,__:[44]},8,["disabled"])])])])):L("",!0)]))}});export{ts as default};
